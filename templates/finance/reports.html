{% extends "base.html" %}

{% block page_title %}Financial Reports{% endblock %}

{% block content %}
<div class="card" style="background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%); color: white;">
    <div class="card-title" style="color: white; opacity: 0.9;">Year to Date ({{ today|date:"Y" }})</div>
    <div class="stat-grid">
        <div class="stat-box" style="background: rgba(255,255,255,0.1);">
            <div class="stat-value" style="color: white;">{{ year_income }}</div>
            <div class="stat-label" style="color: rgba(255,255,255,0.7);">Income</div>
        </div>
        <div class="stat-box" style="background: rgba(255,255,255,0.1);">
            <div class="stat-value" style="color: #ffcdd2;">{{ year_expense }}</div>
            <div class="stat-label" style="color: rgba(255,255,255,0.7);">Expenses</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-title">Expenses by Category (This Month)</div>
    {% for item in expense_by_category %}
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 5px;">
            <span>{{ item.category|title }}</span>
            <span class="font-weight-bold">KSh {{ item.total }}</span>
        </div>
        <div style="background: #eee; height: 8px; border-radius: 4px; overflow: hidden;">
            <div style="background: #c62828; height: 100%; width: 45%;"></div> 
        </div>
    </div>
    {% empty %}
    <p class="empty-state">No expense data for this month.</p>
    {% endfor %}
</div>

<div class="card">
    <div class="card-title">Income by Category (This Month)</div>
    {% for item in income_by_category %}
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 5px;">
            <span>{{ item.category|title }}</span>
            <span class="font-weight-bold">KSh {{ item.total }}</span>
        </div>
        <div style="background: #eee; height: 8px; border-radius: 4px; overflow: hidden;">
            <div style="background: #2e7d32; height: 100%; width: 60%;"></div>
        </div>
    </div>
    {% empty %}
    <p class="empty-state">No income data for this month.</p>
    {% endfor %}
</div>
{% endblock %}